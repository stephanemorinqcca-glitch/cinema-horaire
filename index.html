<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Programme des séances</title>

    <!-- Import de la police Roboto -->
    <link href="s.googleapis.com/css2?family=Roboto&display=swap

    <!-- Lien vers ton fichier CSS -->
    style.css
</head>
<body>

<header>
    <div class="banner-container">
        <a>
        https://www.cine-flash.com/
            https://veeziustaskscm.blob.core.windows.net/veezi-ticketing-assets/jjwk2hm92x8zmdt4ys4sr1vvp0/banner?202508291726
        </a>
    </div>
</header>

<div class="legende" id="legende"></div>

<div class="grid" id="films"></div>
<script>
      fetch("films.json")
      .then(response => response.json())
      .then(data => {
        const legendContainer = document.getElementById("legende");
        data.legende.forEach(attr => {
          const wrapper = document.createElement("div");
          wrapper.style.display = "flex";
          wrapper.style.alignItems = "center";
          wrapper.style.gap = "8px";

          const badge = document.createElement("span");
          badge.className = "badge";
          badge.textContent = attr.ShortName;
          badge.style.color = attr.FontColor;
          badge.style.backgroundColor = attr.BackgroundColor;

          const description = document.createElement("span");
          description.style.fontSize = "0.85em";
          description.style.color = "#ccc";
          description.textContent = attr.Description;

          wrapper.appendChild(badge);
          wrapper.appendChild(description);
          legendContainer.appendChild(wrapper);
        });

        const container = document.getElementById("films");
        data.films.forEach(film => {
          const card = document.createElement("div");
          card.className = "card";
          <hr/>
          if (film.thumbnail) {
            const img = document.createElement("img");
            img.className = "poster";
            img.src = film.thumbnail;
            img.alt = `Affiche de ${film.titre}`;
            card.appendChild(img);
          }

          const title = document.createElement("div");
          title.className = "title";
          title.textContent = film.titre;
          card.appendChild(title);

          if (film.classification || film.content) {
          const contentBlock = document.createElement("div");

          if (film.classification) {
            const rating = document.createElement("span");
            rating.className = "rating";
            rating.textContent = `${film.classification} `;
            contentBlock.appendChild(rating);
          }

          if (film.content) {
            const content = document.createElement("span");
            content.className = "content";
            content.textContent = ` ${film.content}`;
            contentBlock.appendChild(content);
          }
            card.appendChild(contentBlock);
          }

          if (film.synopsis) {
            const synopsis = document.createElement("div");
            synopsis.className = "synopsis";
            synopsis.textContent = film.synopsis;
            card.appendChild(synopsis);
          }

         const seancesDiv = document.createElement("div");
         seancesDiv.className = "seances";

          // Grouper les séances par date
          const seancesParDate = {};

          film.horaire.forEach(seance => {
            const parts = seance.horaire.split(" ");
            const dateStr = parts[0]; // format YYYY-MM-DD
            const heure = parts[1];
            const attributs = parts.slice(2).sort();

          if (!seancesParDate[dateStr]) {
            seancesParDate[dateStr] = [];
          }

          seancesParDate[dateStr].push({
          heure,
          attributs
          });
          });

          // Afficher les séances regroupées
          Object.entries(seancesParDate).forEach(([dateStr, seances]) => {
          const dateObj = new Date(dateStr + 'T00:00:00');
          const optionsJour = { weekday: 'long' };
          const optionsJourNum = { day: 'numeric' };
          const optionsMois = { month: 'long' };

          const jour = dateObj.toLocaleDateString('fr-CA', optionsJour);
          const jourNum = dateObj.toLocaleDateString('fr-CA', optionsJourNum);
          const mois = dateObj.toLocaleDateString('fr-CA', optionsMois);

          const jourLabel = document.createElement("div");
          jourLabel.className = "jour-label";
          jourLabel.textContent = `${jour.charAt(0).toUpperCase() + jour.slice(1).toLowerCase()} ${jourNum}, ${mois.toLowerCase()}`;

          const horairesDiv = document.createElement("div");
          horairesDiv.className = "horaires";

          seances.forEach(({ heure, attributs }) => {
          const seanceLabel = document.createElement("span");
          seanceLabel.className = "seance-label";
          seanceLabel.textContent = `${heure} ${attributs.join(" ")}`;
          horairesDiv.appendChild(seanceLabel);
        });

          const jourBlock = document.createElement("div");
          jourBlock.className = "jour-block";
          jourBlock.appendChild(jourLabel);
          jourBlock.appendChild(horairesDiv);

          seancesDiv.appendChild(jourBlock);
      });

          card.appendChild(seancesDiv);
          container.appendChild(card);
        });
      })
      .catch(error => {
        console.error("Erreur lors du chargement du fichier films.json :", error);
      });
  </script>
<script>
const seancesDiv = document.createElement("div");
seancesDiv.className = "seances";

// Grouper les séances par date
const seancesParDate = {};

film.horaire.forEach(seance => {
  const parts = seance.horaire.split(" ");
  const dateStr = parts[0];
  const heure = parts[1];
  const attributs = parts.slice(2).sort();

  if (!seancesParDate[dateStr]) {
    seancesParDate[dateStr] = [];
  }

  seancesParDate[dateStr].push({ heure, attributs });
});

// Afficher les journées ligne par ligne
Object.entries(seancesParDate).forEach(([dateStr, seances]) => {
  const dateObj = new Date(dateStr + 'T00:00:00');
  const optionsJour = { weekday: 'long' };
  const optionsJourNum = { day: 'numeric' };
  const optionsMois = { month: 'long' };

  const jour = dateObj.toLocaleDateString('fr-CA', optionsJour);
  const jourNum = dateObj.toLocaleDateString('fr-CA', optionsJourNum);
  const mois = dateObj.toLocaleDateString('fr-CA', optionsMois);

  const ligneDiv = document.createElement("div");
  ligneDiv.className = "ligne-seances";

  const dateLabel = document.createElement("span");
  dateLabel.className = "date-label";
  dateLabel.textContent = `${jour.toLowerCase()} ${jourNum}, ${mois.toLowerCase()}`;

  ligneDiv.appendChild(dateLabel);

  seances.forEach(({ heure, attributs }) => {
    const bouton = document.createElement("button");
    bouton.className = "seance-bouton";
    bouton.textContent = ` ${heure}  ${attributs.join(" ")} `;
    ligneDiv.appendChild(bouton);
  });

  seancesDiv.appendChild(ligneDiv);
});

// Ajouter les séances à un conteneur spécifique ou au body
document.body.appendChild(seancesDiv);
</script></body>
</html>
